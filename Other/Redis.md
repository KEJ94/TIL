# Redis 
레디스는 __시스템 메모리를 사용하는 키-값 데이터 스토어__ 이다.  
인메모리 상태에서 데이터를 처리함으로써 흔히 사용하는 관계형 데이터베이스(RDS) 그리고 MongoDB로 대표되는 문서형(Document) 데이터베이스보다도 빠르고 가볍게 동작한다.  
<br>  
__개발자는 크게 2가지 방법으로 사용한다.__  
- 첫째 는 로컬 환경에서 레디스를 호출한다. AWS EC2를 예로 들자면 인스턴스에 레디스를 설치해 인스턴스 메모리를 사용해 레디스를 사용하는 방법이다. 인스턴스의 메모리 여유가 있다면 비용적인 측면으로나 사용성 측면으로나 뛰어나다.
- 둘째 는 클라우드 서비스를 사용해 외부 자원을 사용한다. 레디스 랩(https://redisabs.com/) 등의 서드파티 서비스를 사용해 레디스를 사용하게 되면 통신하는 웹 서버가 아무리 많아도 하나의 프레임워크 바인딩을 사용할 수 있다. 이 경우에 레디스는 여러 웹 서버들의 공유 메모리 역할을 감당할 수 있다.  
<br>
레디스와 백엔드 프레임워크와의 궁합은 전반적으로 괜찮다. 대부분의 백엔드 프레임워크를 지원하고, 모듈을 사용해 적절한 형태로 구현할 수 있어 개발 난이도는 비교적 낮다.  

<br><br>

## 어디에 사용하는가?  
유튜브를 생각해보면 인기 채널의 신규 동영상을 1시간도 안돼서 100만 조회수를 넘기는 경우도 있다. (I/O가 빈번한 데이터)  
RDS 형태의 데이터에 저장해 I/O를 반복한다면 엄청난 자원이 사용될 것이란 건 불 보듯 뻔한 일.  
이처럼 어마어마한 I/O를 발생시키는 데이터를 처리할 때 레디스를 사용해 데이터를 __캐싱__ 처리하고, 일정한 주기에 따라 RDS에 업데이트를 한다면 __RDS에 가해지는 부담을 크게 줄이고, 성능은 크게 향상__ 할 수 있다.  
가장 많이 사용되는 건 __사용자의 세션 관리__ 이다. 사용자의 세션을 유지하고, 불러오고, 여러 활동들을 추적하는게 매우 효과적으로 사용할 수 있다.  
<br><br>

## 데이터 구조  
레디스는 관계형 데이터베이스가 아니다. RDS와 달리 (VARCHAR, INT, DATETIME) 등을 지원하지 않고, 오직 몇 가지 로우 레벨의 데이터 타입만 지원한다.  
- 문자열(String)
- 해시(Hash)
- 리스트(List) 
- 셋(Set)  
<br><br>  

## 스키마
예를 들어 사용자의 전화번호, 닉네임, 로그인 시간을 레디스에 저장한다고 해보자.
- user:userId:phoneNo:문자열
- user:userId:nick:문자열
- user:userId:login:문자열  

개발자라면 어떤 느낌인지 감이 올 것이다. 데이터를 __:__ 로 구분해 접근이 가능한 걸 유추할 수 있다.  
<br><br>  

## 키
__스키마를 깊고, 넓게 만들게 되면 성능에 악영향을 주지 않을까?__ 이런 생각이 들 수 있다.
그러나 레디스의 스키마는 RDS의 로우 숫자와 비슷하게 동작하지 않는다. 즉 성능에 영향을 주지 않는다.  
많은 키(100,000,000개) 건 적은 키(1개) 건 스키마가 많건 적건 동일한 시간이 사용된다.  
<br><br>  

## 유의사항  
특별한 조치를 하지 않으면 레디스의 키는 삭제가 아닌 보관되며 심지어 서버를 종료했다가 다시 켜도 상태가 유지된다.  
레디스 키를 삭제하는 방법은 크게 3가지 이다.  
- 일괄삭제 (FLUSHDB 명령어로 모든 키를 파괴한다. 복구가 불가능하며 개발 수준에서 사용한다.)
- 일정시간 이후 삭제 (Set 에 저장해 특정시간이나 조건에 따라 삭제하는 방법이다. 삭제보다는 밀어내기를 한다고 이해할 수 있다.)
- 기간 만료 후 삭제 (가장 많이 사용되는 방법으로, 쉽게 관리할 수 있다.)   
<br>

